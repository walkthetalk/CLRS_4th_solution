\startEXERCISE
考慮作業選擇問題的一個變形：
每個作業 $a_i$ 除了開始和結束時間外，
還有一個值 $v_i$。
目標不再是求規模最大的兼容作業子集，
而是求值之和最大的兼容作業子集。
也就是說，
選擇一個兼容作業子集 $A$，
使得 $\sum_{a_k\in A} v_k$ 最大化。
設計一個多項式時間的算法求解此問題。
\stopEXERCISE

\startANSWER
動態規劃。時間爲 $O(n\lg n)$。

1) 將作業按結束時間從早到晚進行排序。

2) 對於任一 $1\le i\le n$，構建其解 $S_i$。
 $S_i$ 也是這個問題的解，只是僅包含索引小於等於 $i$ 的作業。
需要記錄所有 $S_i$。

3) 顯然 $S_1 = \{a_1\}$。

4) 按如下方法構建 $S_{i+1}$。
一種是不包含 $a_{i+1}$，即 $S_{i}$；
另一種是包含 $a_{i+1}$，我們可以在 $a_0,\cdots,a_{i}$ 中找到與 $a_{i+1}$ 兼容的
最晚作業 $a_j$，即 $S_j\cup \{a_{i+1}\}$；
這兩種方案中較大的那個就是 $S_{i+1}$。

5) 按這種方式構建 $S_1,S_2,\cdots,S_n$。

6) $S_n$ 即爲所求。

其中查找 $j$ 時可以用二分法，
算法的時間複雜度爲 $O(n\lg n)$。
\stopANSWER
