\startEXERCISE
棧只能在同一端插入、刪除元素，隊列則可在一端插入、另一端刪除，
而\emph{雙端隊列（deque）}兩端均可插入、刪除元素。
以數列實現雙端隊列，寫出四個過程在雙端隊列的兩端插入、刪除元素，
要求時間均爲 $O(1)$。
\stopEXERCISE

\startANSWER
輔助過程：

\CLRSH{PREV(Q, i)}
\startCLRSCODE
if i == 1
	return Q.length
else
	return i - 1
\stopCLRSCODE

實現：

\CLRSH{ENQUEUE_TAIL(Q, x)}
\startCLRSCODE
if FULL(Q)
	error "Queue overflow"
Q[Q.tail] = x
Q.tail = \ALGO{NEXT(Q, Q.tail)}
\stopCLRSCODE

\CLRSH{ENQUEUE_HEAD(Q, x)}
\startCLRSCODE
if \ALGO{FULL(Q)}
	error "Queue overflow"
Q[Q.head] = x
Q.head = \ALGO{PREV(Q, Q.head)}
\stopCLRSCODE

\CLRSH{DEQUEUE_HEAD(Q)}
\startCLRSCODE
if \ALGO{EMPTY(Q)}
	error "Queue underflow"
x = Q[Q.head]
Q.head = \ALGO{NEXT(Q, Q.head)}
return x
\stopCLRSCODE

\CLRSH{DEQUEUE_TAIL(Q)}
\startCLRSCODE
if \ALGO{EMPTY(Q)}
	error "Queue underflow"
x = Q[Q.tail]
Q.tail = \ALGO{PREV(Q, Q.tail)}
return x
\stopCLRSCODE
\stopANSWER
